<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Referral Code QR</title>
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>
    <style>
      :root {
        --primary-color: #4054a7; /* Updated primary color */
      }
      body {
        margin: 0;
        padding: 0;
        background-color: #f0f0f0;
      }
      .page {
        width: 8.5in;
        height: 11in;
        background-color: white;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        box-sizing: border-box;
        padding: 0.626in 0.75in;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: center;
        position: relative;
      }
      .curious-text {
        width: 100%;
        margin-bottom: 0.25in;
        flex: 0 0 auto;
      }
      #qrcode {
        flex: 1 1 auto;
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
      }
      #qrcode svg {
        max-width: 100%;
        max-height: 100%;
      }
      .brand-footer {
        width: 100%;
        flex: 0 0 auto;
      }
      #colorPicker {
        position: absolute;
        top: 0.25in;
        right: 0.25in;
      }
      @media print {
        @page {
          size: letter;
          margin: 0;
        }
        body {
          background-color: white;
        }
        .page {
          width: 8.5in;
          height: 11in;
          box-shadow: none;
        }
        #colorPicker {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <div class="page">
      <input type="color" id="colorPicker" value="#4054a7" />
      <svg
        xmlns="http://www.w3.org/2000/svg"
        version="1.1"
        viewBox="0 0 504 139.4"
        alt="Curiosity"
        class="curious-text"
      >
        <defs>
          <style>
            .cls-1 {
              fill: currentColor;
            }
          </style>
        </defs>
        <g>
          <g id="Layer_1">
            <g>
              <path
                class="cls-1"
                d="M54.3,0c10.7,0,19.8,3,27.5,10.4,2.5,2.3,4.5,1.7,4.9-1.5l.8-7.4h3.9l2.5,47.4h-3.9c-4.7-26.5-14.9-41.5-32.7-41.5s-36.8,26.3-36.8,61.3,13.7,60.8,36.8,60.8,32.7-20.3,36.2-47.2h4.9c-3.2,35-18.1,57.1-46.6,57.1S0,109,0,70.8,21.8,0,54.3,0Z"
              />
              <path
                class="cls-1"
                d="M157.8,136.5l-.3-14.2-.5-.2c-5.7,9-13.7,17.3-25.6,17.3s-18.3-9.4-18.3-24.1v-47.2c0-10.9-.5-12.9-10.7-9.7l-1.2-3.7,25.8-8.4,2.3,2.2v65.2c0,9.9,3,14.6,9.4,14.6s13.4-5.7,18.8-12.9v-47.2c0-10.9-.3-12.9-10.7-9.7l-1.2-3.7,26-8.4,2.2,2.2v68.3c0,11.2.3,13.4,10.7,9.5l1.5,3.9-24.8,9.2-3.3-2.8Z"
              />
              <path
                class="cls-1"
                d="M247.1,53.8c0,6.5-3.9,10.7-8.2,10.7s-4.4-1.2-6.5-3.5c-2.2-2.2-3-2.8-5-2.8-3.9,0-8.4,5.5-11.9,15.7v44.6c0,11.4,2.5,14.1,17.8,14.1v4.2h-45.2v-4c9.7,0,11.4-2.5,11.4-13.2v-51.6c0-11.2,0-13.6-10-9.4l-1.7-3.9,13.4-5.4,11.4-4.7,3,2.5v16.1h.5c4.7-8.9,12.9-18.3,22.1-18.3s9,3.3,9,8.9Z"
              />
              <path
                class="cls-1"
                d="M276.4,119.4c0,10.7,1.7,13.2,11.9,13.2v4h-39.9v-4c10.2,0,11.9-2.5,11.9-13.2v-51.6c0-11.2-.2-13.6-9.9-9.5l-1.5-3.9,24.6-9.9,2.8,2.5v72.4ZM256.1,18.3c0-6,4.5-10.4,10.9-10.4s10.7,4.4,10.7,10.4-4.5,10.2-10.7,10.2-10.9-4.4-10.9-10.2Z"
              />
              <path
                class="cls-1"
                d="M291.3,92.6c0-27,13.2-47.7,36-47.7s36,19.3,36,46.7-13.4,47.7-36,47.7-36-19.3-36-46.7ZM346.4,101.5c0-22.8-6.9-49.2-21.6-49.2s-16.7,15.7-16.7,30.5c0,22.8,7,49.2,21.8,49.2s16.6-15.7,16.6-30.5Z"
              />
              <path
                class="cls-1"
                d="M420.3,136.5l-.3-14.2-.5-.2c-5.7,9-13.7,17.3-25.6,17.3s-18.3-9.4-18.3-24.1v-47.2c0-10.9-.5-12.9-10.7-9.7l-1.2-3.7,25.8-8.4,2.3,2.2v65.2c0,9.9,3,14.6,9.4,14.6s13.4-5.7,18.8-12.9v-47.2c0-10.9-.3-12.9-10.7-9.7l-1.2-3.7,26-8.4,2.2,2.2v68.3c0,11.2.3,13.4,10.7,9.5l1.5,3.9-24.8,9.2-3.3-2.8Z"
              />
              <path
                class="cls-1"
                d="M461.6,133.3c-2.2-1.7-3.5-1.2-4.5.8l-1.3,3.3h-3.7l-1.2-36.2h3.7c2.5,19.9,12.1,31,23.6,31s12.1-5.4,12.1-13.9-3.5-10.7-19.1-23.3c-14.2-11.2-19.1-17.8-19.1-27.3,0-13.9,10-22.9,23.3-22.9s12.7,3.2,15.7,5.7c2.2,2,3.9,1.2,4.4-.8l1-3.7h3.9l.7,29.3h-3.7c-2-13.1-9.4-23.4-20.6-23.4s-11.1,4.5-11.1,11.2,4.4,10.7,16.1,19.9c15.1,11.9,22.3,19.1,22.3,31.8s-11.2,24.5-24.1,24.5-14.7-3.5-18.3-6Z"
              />
            </g>
          </g>
        </g>
      </svg>

      <div id="qrcode"></div>

      <svg
        xmlns="http://www.w3.org/2000/svg"
        version="1.1"
        viewBox="0 0 504 22.6"
        class="brand-footer"
        alt="Perplexity.ai"
      >
        <defs>
          <style>
            .cls-1 {
              fill: currentColor;
            }

            .cls-2 {
              fill: currentColor;
              stroke: currentColor;
              stroke-miterlimit: 10;
            }
          </style>
        </defs>
        <!-- Generator: Adobe Illustrator 28.6.0, SVG Export Plug-In . SVG Version: 1.2.0 Build 709)  -->
        <g>
          <g id="Layer_1">
            <g>
              <path
                class="cls-1"
                d="M19.4,6.8h-2.7V0l-6.5,6.1V0h-1.1v6.1L2.7,0v6.8H0v9.8h2.7v6.1l6.5-5.8v5.8h1.1v-5.8l6.5,5.8v-6.1h2.7V6.8ZM15.7,2.5v4.3h-4.6l4.6-4.3ZM3.8,2.5l4.6,4.3H3.8V2.5ZM1.1,15.4v-7.6h7.2l-5.7,5.2v2.4h-1.6,0ZM3.7,13.5l5.4-5v6.8l-5.4,4.8v-6.7h0ZM15.7,20.2l-5.4-4.8v-6.8l5.4,5v6.7h0ZM18.4,15.4h-1.6v-2.4l-5.7-5.2h7.2v7.6Z"
              />
              <path
                class="cls-1"
                d="M49.6,6.8h.8v1.6h-1c-.8,0-1.4.2-1.7.6-.4.4-.6,1-.6,1.8v5.2h-1.6V6.8h1.6v1.5c0,0,0,.1.1.1s0,0,.1,0c0,0,0,0,0-.1.3-1,1.1-1.4,2.3-1.4h0ZM59.9,8.7c.4.7.6,1.6.6,2.7s-.2,1.9-.6,2.7c-.4.7-.9,1.3-1.6,1.6-.7.4-1.4.5-2.1.5-1.5,0-2.5-.6-3.1-1.8,0,0-.1-.1-.2-.1s-.1,0-.1.1v4.9h-1.6V6.8h1.6v1.6c0,0,0,.1.1.1s.1,0,.2-.1c.6-1.2,1.7-1.8,3.1-1.8s1.5.2,2.1.5c.7.4,1.2.9,1.6,1.6ZM58.9,11.4c0-1.1-.3-1.9-.9-2.5-.6-.6-1.3-.9-2.3-.9s-1.7.3-2.3.9c-.6.6-.8,1.4-.8,2.5s.2,1.9.8,2.5c.6.6,1.3.9,2.3.9s1.7-.3,2.3-.9c.6-.6.9-1.4.9-2.5ZM33.9,8.8c.4.7.6,1.6.6,2.7s-.2,1.9-.6,2.7-.9,1.3-1.6,1.6c-.7.4-1.4.5-2.1.5-1.5,0-2.5-.6-3.1-1.8,0,0-.1-.1-.2-.1s-.1,0-.1.1v4.9h-1.6V6.8h1.6v1.6c0,0,0,.1.1.1s.1,0,.2-.1c.6-1.2,1.7-1.8,3.1-1.8s1.5.2,2.1.5c.7.4,1.2.9,1.6,1.6h0ZM32.9,11.4c0-1.1-.3-1.9-.9-2.5-.6-.6-1.3-.9-2.3-.9s-1.7.3-2.3.9c-.6.6-.8,1.4-.8,2.5s.2,1.9.8,2.5c.6.6,1.3.9,2.3.9s1.7-.3,2.3-.9c.6-.6.9-1.4.9-2.5ZM42.6,13.1h1.7c-.2.9-.7,1.6-1.4,2.2-.7.6-1.7.9-2.9.9s-1.8-.2-2.5-.6c-.7-.4-1.3-1-1.7-1.7-.4-.7-.6-1.6-.6-2.6s.2-1.8.6-2.6c.4-.7.9-1.3,1.6-1.7.7-.4,1.5-.6,2.4-.6s1.7.2,2.4.6c.6.4,1.1.9,1.4,1.5.3.6.5,1.3.5,2.1v1.1h-7.2c0,.9.4,1.6.9,2.2.6.5,1.3.8,2.2.8s1.3-.2,1.7-.5c.4-.3.7-.7.9-1.3ZM36.8,10.5h5.5c0-.8-.2-1.4-.6-1.9-.4-.5-1-.7-1.9-.7s-1.5.2-2,.7c-.5.4-.8,1.1-1,1.9h0ZM61.7,16h1.6V3.3h-1.6v12.7h0ZM83.5,5.8h1.8v-2h-1.8v2ZM90,14.6c-.3,0-.5,0-.5,0s-.1,0-.2,0c0,0,0-.1,0-.2s0-.2,0-.5c0-.3,0-.7,0-1.3v-4.4h2.2l-.4-1.3h-1.8v-2.5h-1.6v2.5h-1.7v1.3h1.7v4.8c0,1,.2,1.8.7,2.3.5.5,1.2.7,2.2.7h1.2v-1.4h-.6c-.6,0-1,0-1.3,0h0ZM99.2,6.8l-2.6,7.7c0,0,0,.2-.3.2s-.2-.1-.3-.2l-2.6-7.7h-1.6l3,9.2h1.1c0,0,.1,0,.2,0,0,0,0,0,0,0,0,0,0,.2,0,.3l-.5,1.3c0,.2-.2.3-.4.3s-.2,0-.5,0c-.3,0-.6,0-1,0h-1.3v1.4h1.7c1,0,1.6-.2,2.1-.5.5-.3.9-.9,1.2-1.8l3.3-9.9v-.4h-1.5ZM78.4,10.2l-2.5-3.4h-1.7v.4l3,4-3.6,4.5v.4h1.8l2.9-3.7,2.7,3.7h1.7v-.4l-3.1-4.2,3.4-4.2v-.4h-1.8l-2.7,3.4h0ZM83.7,16h1.6V6.8h-1.6v9.2h0ZM73.6,13.1c-.2.9-.7,1.6-1.4,2.2-.7.6-1.7.9-2.9.9s-1.8-.2-2.5-.6c-.7-.4-1.3-1-1.7-1.7-.4-.7-.6-1.6-.6-2.6s.2-1.8.6-2.6c.4-.7.9-1.3,1.6-1.7.7-.4,1.5-.6,2.4-.6s1.7.2,2.3.6c.6.4,1.1.9,1.4,1.5.3.6.5,1.3.5,2.1v1.1h-7.2c0,.9.4,1.6.9,2.2.6.5,1.3.8,2.2.8s1.3-.2,1.7-.5c.4-.3.7-.7.9-1.3h1.7ZM66.2,10.5h5.5c0-.8-.2-1.4-.6-1.9-.4-.5-1-.7-1.9-.7s-1.5.2-2,.7c-.5.4-.8,1.1-1,1.9h0Z"
              />
              <path
                class="cls-1"
                d="M476.9,19.7c5.1,0,7.8-3.5,9.3-6.3.3-.6.6-1.2.9-1.7s.1-.3.2-.4c1.3-2.6,3.5-6.5,8.2-6.5,3.6,0,6.5,2.9,6.5,6.5,0,3.6-2.9,6.5-6.5,6.5-3.6,0-5.7-2.2-7.1-4.5-.3.6-.6,1.2-1.1,1.9,1.6,2.3,4.1,4.5,8.2,4.5,4.6,0,8.4-3.8,8.4-8.4,0-4.6-3.8-8.4-8.4-8.4-5.1,0-7.8,3.5-9.3,6.3-.3.6-.6,1.2-.9,1.7s-.1.3-.2.4c-1.3,2.6-3.5,6.5-8.2,6.5-3.6,0-6.5-2.9-6.5-6.5,0-3.6,2.9-6.5,6.5-6.5,3.6,0,5.7,2.2,7.1,4.5.3-.6.6-1.2,1.1-1.9-1.6-2.3-4.1-4.5-8.2-4.5-4.6,0-8.4,3.8-8.4,8.4,0,4.6,3.8,8.4,8.4,8.4Z"
              />
              <line class="cls-2" x1="120.9" y1="11.3" x2="456.7" y2="11.3" />
            </g>
          </g>
        </g>
      </svg>
    </div>

    <script>
      // Function to get URL parameters
      function getUrlParameter(name) {
        name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
        var regex = new RegExp("[\\?&]" + name + "=([^&#]*)");
        var results = regex.exec(location.search);
        return results === null
          ? ""
          : decodeURIComponent(results[1].replace(/\+/g, " "));
      }

      // Get the referral code from URL parameters
      var referralCode = getUrlParameter("referralCode");

      if (referralCode) {
        // Generate the full URL for the QR code
        var qrCodeUrl = `https://pplx.ai?utm_source=backtoschool&edu_referral_code=${referralCode}&refSource=qrstrat`;

        // Generate QR code as SVG
        var qr = qrcode(0, "M");
        qr.addData(qrCodeUrl);
        qr.make();

        // Create SVG string
        var svgString = qr.createSvgTag(5, 0);

        // Display QR code
        var qrcodeElement = document.getElementById("qrcode");
        qrcodeElement.innerHTML = svgString;

        // Modify SVG to use primary color
        var svg = qrcodeElement.querySelector("svg");
        svg.setAttribute("width", "100%");
        svg.setAttribute("height", "100%");
        svg.style.display = "block";

        // Change fill color of all path elements in the SVG
        var paths = svg.querySelectorAll("path");
        paths.forEach(function (path) {
          path.setAttribute("fill", "var(--primary-color)");
        });
      } else {
        document.getElementById("qrcode").innerHTML =
          "No referral code provided.";
      }

      // Color picker functionality
      var colorPicker = document.getElementById("colorPicker");
      colorPicker.addEventListener("input", function (e) {
        document.documentElement.style.setProperty(
          "--primary-color",
          e.target.value
        );
        updateSVGColors(e.target.value);
      });

      function updateSVGColors(color) {
        // Update curious-text SVG
        var curiousText = document.querySelector(".curious-text");
        curiousText.querySelectorAll(".cls-1").forEach(function (path) {
          path.style.fill = color;
        });

        // Update brand-footer SVG
        var brandFooter = document.querySelector(".brand-footer");
        brandFooter.querySelectorAll(".cls-1").forEach(function (path) {
          path.style.fill = color;
        });
        brandFooter.querySelectorAll(".cls-2").forEach(function (path) {
          path.style.stroke = color;
        });

        // Update QR code color
        if (qrcodeElement) {
          var paths = qrcodeElement.querySelectorAll("path");
          paths.forEach(function (path) {
            path.setAttribute("fill", color);
          });
        }
      }

      // Initial color update
      updateSVGColors(colorPicker.value);
    </script>
  </body>
</html>
